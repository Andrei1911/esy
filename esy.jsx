// Generated by CoffeeScript 1.10.0// Generated by CoffeeScript 1.10.0var Esy, dump, log;Esy = (function() {  function Esy() {}  Esy.prototype.initialize = function() {    this.ui = new EsyUi;    this.http = new EsyHttp;    this.file = new EsyFile;    this.color = new EsyColor;    this.project = new EsyProject;    this.composition = new EsyComposition;    if (esy.debug) {      return this.selfBuild((new File($.fileName)).parent.parent.path);    } else {      this.updater = new EsyUpdater({        repo: "seblavoie/esy",        file: "esy.jsx",        version: "v0.0.2",        destination: Folder.appPackage.path + "/Scripts/startup"      });      return this.updater.checkForUpdate();    }  };  Esy.prototype.selfBuild = function(path) {    return esy.file.buildExtendScript(path + "/lib/esy.js", [path + "/esy.jsx"]);  };  Esy.prototype.listProperties = function(obj) {    var i, property, ref, results;    this.log("Esy.listProperties:");    results = [];    for (property = i = 1, ref = obj.numProperties; 1 <= ref ? i <= ref : i >= ref; property = 1 <= ref ? ++i : --i) {      results.push(this.log(property));    }    return results;  };  Esy.prototype.log = function(str) {    try {      return $.write((str != null ? str.toString() : void 0) + "\n");    } catch (undefined) {}  };  Esy.prototype.dump = function(obj, name, line) {    var propertyName, propertyValue;    if (line == null) {      line = true;    }    if (obj) {      if (name == null) {        name = "[" + (typeof obj) + "]";      }      if (line) {        this.log("\n------------------------");      }      this.log("Dump of " + name + ":\n");      for (propertyName in obj) {        propertyValue = obj[propertyName];        this.log("  " + propertyName + ": " + (propertyValue != null ? propertyValue.toString() : void 0) + " \n");      }      if (line) {        return this.log("------------------------");      }    }  };  Esy.prototype.extend = function(sourceObject, defaultObject) {    var propertyName, propertyValue;    for (propertyName in defaultObject) {      propertyValue = defaultObject[propertyName];      if (!sourceObject[propertyName]) {        sourceObject[propertyName] = propertyValue;      }    }    return sourceObject;  };  return Esy;})();log = function(log) {  return esy.log(log);};dump = function(obj, name, line) {  if (line == null) {    line = true;  }  return esy.dump(obj, name, line);};// Generated by CoffeeScript 1.10.0var EsyUpdater;EsyUpdater = (function() {  function EsyUpdater(opts) {    this.repo = opts.repo, this.file = opts.file, this.destination = opts.destination;    this.localVersion = opts.version;    this.username = encodeURIComponent(system.userName);    this.data;    this.remoteVersion;    this.connection;  }  EsyUpdater.prototype.initialize = function() {};  EsyUpdater.prototype.makeConnection = function() {};  EsyUpdater.prototype.getLatestVersion = function() {};  EsyUpdater.prototype.checkIfLatest = function() {};  EsyUpdater.prototype.checkForUpdate = function() {};  EsyUpdater.prototype.update = function() {};  return EsyUpdater;})();// Generated by CoffeeScript 1.10.0var EsyColor;EsyColor = (function() {  function EsyColor() {}  EsyColor.prototype.hexToRgb = function(hex) {    var b, g, r;    hex = parseInt(hex, 16);    r = hex >> 16;    g = (hex & 0x00ff00) >> 8;    b = hex & 0xff;    return [r, g, b];  };  EsyColor.prototype.rgbToHex = function(rgb) {    var componentToHex;    componentToHex = function(c) {      var hex;      hex = c.toString(16);      if (hex.length === 1) {        return "0" + hex;      } else {        return hex;      }    };    return componentToHex(rgb[0] * 255) + componentToHex(rgb[1] * 255) + componentToHex(rgb[2] * 255);  };  EsyColor.prototype.hexToHsl = function(hex) {    var b, g, r;    hex = parseInt(hex, 16);    r = hex >> 16;    g = (hex & 0x00ff00) >> 8;    b = hex & 0xff;    return [r / 255, g / 255, b / 255];  };  return EsyColor;})();// Generated by CoffeeScript 1.10.0var EsyFile;EsyFile = (function() {  function EsyFile() {}  EsyFile.prototype["delete"] = function(filepath) {    var file;    if (File(filepath)) {      file = File(filepath);    }    return file.remove();  };  EsyFile.prototype.append = function(filepath, content) {    var file;    file = File(filepath);    file.open("a");    file.write(content);    file.close();    return file;  };  EsyFile.prototype.buildExtendScript = function(filepath, destinations) {    var content, destination, i, len, read, results;    content = this.read(filepath);    content = content.replace("debug = true", "debug = false");    read = (function(_this) {      return function(str, p1) {        return _this.read((_this.path(filepath)) + "/" + p1);      };    })(this);    content = content.replace(/#include \"(.*)\";/g, read);    if (typeof destinations === "string") {      destinations = [destinations];    }    results = [];    for (i = 0, len = destinations.length; i < len; i++) {      destination = destinations[i];      results.push(this.create("" + (destination.toString()), content));    }    return results;  };  EsyFile.prototype.create = function(filepath, content, overwrite) {    var file;    if (content == null) {      content = "";    }    if (overwrite == null) {      overwrite = true;    }    if (overwrite) {      this["delete"](filepath);    }    file = File(filepath);    file.open("w");    file.write(content);    file.close();    return file;  };  EsyFile.prototype.exists = function(filepath) {    var file;    file = File(filepath);    if (file.created) {      return file;    } else {      return false;    }  };  EsyFile.prototype.read = function(filepath) {    var content, file;    file = File(filepath);    file.open("r");    content = file.read();    file.close();    return content;  };  EsyFile.prototype.folderName = function(filepath) {    var folderName;    folderName = this.filename(filepath);    return folderName;  };  EsyFile.prototype.fileName = function(filepath) {    var filename;    filename = filepath.substr(filepath.lastIndexOf('/') + 1);    return filename;  };  EsyFile.prototype.path = function(filepath) {    var filename;    filename = filepath.substr(0, filepath.lastIndexOf('/'));    return filename;  };  return EsyFile;})();// Generated by CoffeeScript 1.10.0var EsyHttp;EsyHttp = (function() {  function EsyHttp() {}  EsyHttp.prototype.open = function(url) {    var command;    if ($.os.indexOf("Windows") !== -1) {      url = url.replace(/&/g, "^&");      command = "cmd /c 'explorer " + url + "'";    } else {      command = "open '" + url + "'";    }    return system.callSystem(command);  };  EsyHttp.prototype.get = function(url) {    var call, conn, domain, httpPrefix, port, reply, typeMatch;    port = "80";    httpPrefix = url.match(/http:\/\//);    domain = (httpPrefix == null ? url.split("/")[0] + ":" + port : url.split("/")[2] + ":" + port);    call = "GET " + (httpPrefix == null ? "http://" + url : url) + " HTTP/1.0\r\nHost:" + (httpPrefix == null ? url.split("/")[0] : url.split("/")[2]) + "\r\nConnection: close\r\n\r\n";    reply = new String();    conn = new Socket();    typeMatch = url.match(/(\.)(\w{3,4}\b)/g);    if (conn.open(domain, "binary")) {      conn.write(call);      reply = conn.read(9999999999);      conn.close();    } else {      reply = "";      true;    }    return reply.substr(reply.indexOf("\r\n\r\n") + 4);  };  return EsyHttp;})();// Generated by CoffeeScript 1.10.0var EsyUi;EsyUi = (function() {  function EsyUi() {}  return EsyUi;})();// Generated by CoffeeScript 1.10.0var EsyProject;EsyProject = (function() {  function EsyProject() {}  EsyProject.prototype.hasItems = function() {    return app.project.numItems > 0;  };  EsyProject.prototype.first = function(itemName) {    var compositions;    compositions = this.find(itemName);    return compositions[0];  };  EsyProject.prototype.find = function(itemName) {    var compositions, i, item, j, ref;    if (this.hasItems) {      compositions = [];      for (i = j = 1, ref = app.project.numItems; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {        if (app.project.item(i).name === itemName) {          item = app.project.item(i);          if (item instanceof CompItem) {            compositions.push(item);          }        }      }    }    return compositions;  };  EsyProject.prototype.filter = function(expression, type) {    var i, item, items, j, passes, ref;    items = [];    if (this.hasItems) {      for (i = j = 1, ref = app.project.numItems; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {        item = app.project.item(i);        passes = true;        if (expression) {          if (!expression.test(item.name)) {            passes = false;          }        }        if (type) {          if (item.typeName !== type) {            passes = false;          }        }        if (passes) {          items.push(item);        }      }    }    return items;  };  return EsyProject;})();// Generated by CoffeeScript 1.10.0var EsyComposition;EsyComposition = (function() {  function EsyComposition() {}  EsyComposition.prototype.hasLayers = function(composition) {    return composition.numLayers > 0;  };  EsyComposition.prototype.find = function(composition, layerName) {    var i, j, layers, ref;    layers = [];    if (composition) {      if (this.hasLayers(composition)) {        for (i = j = 1, ref = composition.numLayers; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {          if (composition.layers[i].name === layerName) {            layers.push(composition.layers[i]);          }        }      }    }    return layers;  };  EsyComposition.prototype.first = function(composition, layerName) {    var layers;    layers = this.find(composition, layerName);    return layers[0];  };  return EsyComposition;})();var esy;esy = {};esy = new Esy();esy.container = this;esy.debug = false;esy.initialize();